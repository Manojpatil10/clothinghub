<!-- customerProfile.ejs -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClothingHub</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
    integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/css/customerCss/customerProfile.css" />
</head>

<body>
  <div class="wrapper">
    <header>
      <nav class="navigation navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container">
          <!-- Brand -->
          <a href="#" class="logo">
            ClothingHub
          </a>

          <!-- Toggler Button -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Navbar Links -->
          <div class="collapse navbar-collapse " id="navbarNav">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a href="/" class="nav-link">Home
                </a>
              </li>
              <li class="nav-item">
                <a href="/customerProfile?contentId=profile" class="nav-link">Profile
                </a>
              </li>
              <li class="nav-item">
                <a href="/customerProfile?contentId=orders" class="nav-link">Orders
                </a>
              </li>
              <li class="nav-item">
                <a href="/customerProfile?contentId=payment" class="nav-link">Payment Method
                </a>
              </li>
            </ul>

            <!-- Icons Section -->
            <div class="d-flex">
              <a href="/" class="icon nav-link">
                <!-- <i class="fa-solid fa-right-from-bracket logout-icon"></i> -->
                <a href="/customerLogout" class="nav-link logout-btn">Logout</a>
              </a>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="content">
        <div class="container">
          <form method="post" action="/customerProfileUpdate" enctype="multipart/form-data" class="">
            <div class="profile-section">
              <div class="row w-100">
                <div class="left-section-outer col-12 mb-4 col-lg-3 mb-lg-0">
                  <div class="sidebar">
                    <div class="profile-info">
                      <div class="profile-photo d-flex justify-content-center mb-4">
                        <div class="position-relative">
                          <img
                            src="<%= profileData && profileData.profileImg || '/images/illustration/profile-img.jpg' %>"
                            alt="img" />
                          <div class="image-selector">
                            <span class="profile-camera" id="imageUploadTrigger">
                              <!-- <i class="fa-solid fa-plus"></i> -->
                              <i class="fa-solid fa-camera"></i>
                            </span>
                            <input type="file" id="imageUploadInput" accept="image/*" name="customerProfile"
                              style="display: none" />
                          </div>
                        </div>
                      </div>
                      <h3>Welcome! <%= profileData && profileData.name || '' %>
                      </h3>
                    </div>
                    <nav class="menu">
                      <ul>
                        <li>
                          <a href="/" class="text-decoration-none">
                            <i class="bi bi-gift"></i>Home
                          </a>
                        </li>
                        <li class="<%= content === 'profile' ? 'active' : '' %>">
                          <a href="/customerProfile?contentId=profile" class="text-decoration-none">
                            <i class="bi bi-person"></i> Personal Information
                          </a>
                        </li>
                        <li class="<%= content === 'orders' ? 'active' : '' %>">
                          <a href="/customerProfile?contentId=orders" class="text-decoration-none">
                            <i class="bi bi-bag"></i> My Orders
                          </a>
                        </li>
                        <li class="<%= content === 'payment' ? 'active' : '' %>">
                          <a href="/customerProfile?contentId=payment" class="text-decoration-none">
                            <i class="bi bi-credit-card"></i> Payment Methods
                          </a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>

                <div class="right-section-outer col-12 col-lg-9 overflow-auto">
                  <%if(content==='profile'){%>
                    <div class="profile-form">
                      <h2>Personal Information</h2>
                      <div class="row">
                        <div class="form-group col-12">
                          <label for="first-name">Full Name</label>
                          <input type="text" id="first-name" name="name" placeholder="Denis Holland"
                            value="<%= profileData && profileData.name || '' %>" />
                        </div>
                        <div class="form-group col-12">
                          <label for="email">Email</label>
                          <input type="email" id="email" name="email" placeholder="denis.holland@company.com"
                            value="<%= signupData && signupData.customerEmail || '' %>" />
                        </div>
                        <div class="form-group col-12">
                          <label for="phone">Phone</label>
                          <input type="tel" id="phone" name="phone" placeholder="+91"
                            value="<%= profileData && profileData.phone || '' %>" />
                        </div>
                        <div class="form-group col-12">
                          <label for="dob">Date of Birth</label>
                          <input type="date" id="dob" name="dob" value="<%= profileData && profileData.DOB || '' %>" />
                        </div>
                        <div class="form-group gender">
                          <label>Gender</label>
                          <div class="gender-options">
                            <label>
                              <input type="radio" id="male" name="gender" value="male" <%=profileData &&
                                profileData.gender==='male' ? 'checked' : '' %> />
                              Male
                            </label>
                            <label>
                              <input type="radio" id="female" name="gender" value="female" <%=profileData &&
                                profileData.gender==='female' ? 'checked' : '' %> />
                              Female
                            </label>
                            <label>
                              <input type="radio" id="other" name="gender" value="other" <%=profileData &&
                                profileData.gender==='other' ? 'checked' : '' %> />
                              Other
                            </label>
                          </div>
                        </div>
                        <div class="form-group col-6">
                          <label for="street">Street</label>
                          <input type="text" id="street" name="street" placeholder="123 Main St"
                            value="<%= profileData && profileData.street || '' %>" />
                        </div>
                        <div class="form-group col-6">
                          <label for="city">City</label>
                          <input type="text" id="city" name="city" placeholder="Pune"
                            value="<%= profileData && profileData.city || '' %>" />
                        </div>
                        <div class="form-group col-6">
                          <label for="state">State</label>
                          <input type="text" id="state" name="state" placeholder="Maharashtra"
                            value="<%= profileData && profileData.state || '' %>" />
                        </div>
                        <div class="form-group col-6">
                          <label for="pin">PIN</label>
                          <input type="text" id="pin" name="pin" placeholder="411002"
                            value="<%= profileData && profileData.pin || '' %>" />
                        </div>
                        <div class="form-buttons col-12">
                          <button type="submit" class="save-btn">Save</button>
                        </div>
                      </div>
                    </div>
                    <%}else if(content==='orders' ){%>
                      <div class="orders-div">
                        <h2>My Orders</h2>
                        <div class="row">
                          <% orderData.forEach(order=> { %>
                            <div class="col-12 mb-4 col-md-6 col-xl-4">
                              <div class="order-card">
                                <div class="order-header">
                                  <h3 class="order-number">Order #: <%= order.orderNumber %>
                                  </h3>
                                  <h3 class="order-status">Status: <span
                                      class="<%= order.status === 'pending' ? 'pending-status' : 'completed-status' %>">
                                      <%= order.status %>
                                    </span></h3>
                                </div>
                                <div>
                                  <p class="order-details">Total Amount: â‚¹<%= order.totalAmount %>
                                  </p>
                                  <p class="order-details">Payment Method: <%= order.paymentMethod %>
                                  </p>
                                  <p class="order-details">Date: <%= order.date %>
                                  </p>
                                </div>

                                <div class="product-list">
                                  <% order.productDetails.forEach(product=> { %>
                                    <div class="product-item">
                                      <img src="<%= product.productImage %>" alt="<%= product.productName %>" />
                                      <div class="product-info">
                                        <p>Product: <%= product.productName %>
                                        </p>
                                        <p>Quantity: <%= product.quantity %>
                                        </p>
                                      </div>
                                    </div>
                                    <% }); %>
                                </div>
                                <a href="#" class="button">View Details</a>
                              </div>
                            </div>
                            <% }); %>
                        </div>
                      </div>
                      <%}else{%>
                        <div class="payment-method">
                          <h1 class="text-light">This is payment method</h1>
                        </div>
                        <%}%>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </main>

    <footer>
      <div class="footer-container">
        <div class="container">
          <div class="row">
            <div class="col-12 mb-4 col-sm-6 mb-sm-5 col-xl-3 mb-xl-0">
              <div class="content_1">
                <a href="" class="navbar-brand">
                  <span class="logo">ClothingHub</span>
                </a>
                <p>The customer is at the heart of our<br>unique business model, which includes<br>design.</p>
                <img src="/images/illustration/cards.png" alt="cards">
              </div>
            </div>
            <div class="col-12 mb-4 col-sm-6 mb-sm-5 col-xl-3 mb-xl-0">
              <div class="content_2">
                <h4>SHOPPING</h4>
                <a href="#sellers">Clothing Store</a>
                <a href="#sellers">Trending Shoes</a>
                <a href="#sellers">Accessories</a>
                <a href="#sellers">Sale</a>
              </div>
            </div>
            <div class="col-12 mb-4 col-sm-6 mb-sm-5 col-xl-3 mb-xl-0">
              <div class="content_3">
                <h4>SHOPPING</h4>
                <a href="./contact.html">Contact Us</a>
                <a href="https://payment-method-sb.netlify.app/" target="_blank">Payment Method</a>
                <a href="https://delivery-status-sb.netlify.app/" target="_blank">Delivery</a>
                <a href="https://codepen.io/sandeshbodake/full/Jexxrv" target="_blank">Return and Exchange</a>
              </div>
            </div>
            <div class="col-12 col-sm-6 mb-sm-5 col-xl-3">
              <div class="content_4">
                <h4>NEWLETTER</h4>
                <p>Be the first to know about new<br>arrivals, look books, sales & promos!</p>
                <div class="f-mail">
                  <input type="email" placeholder="Your Email">
                  <i class="fa-solid fa-envelope"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="f-design">
        <div class="f-design-txt container">
          <p class="mb-0">Design and Code by @Manoj Patil</p>
        </div>
      </div>
    </footer>
  </div>

  <!-- Bootstrap JS and Popper.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script>
    const imageUploadTrigger = document.getElementById("imageUploadTrigger");
    const imageUploadInput = document.getElementById("imageUploadInput");
    const imagePreview = document.getElementById("imagePreview");

    // Trigger file input on span click
    imageUploadTrigger.addEventListener("click", () => {
      imageUploadInput.click();
    });

    // Show preview of selected image
    imageUploadInput.addEventListener("change", (event) => {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          imagePreview.src = e.target.result;
          imagePreview.style.display = "block";
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>

</html>