<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClothingHub</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/css/indexPagesCss/checkoutPage.css">
</head>

<body>
  <div class="wrapper">
    <header>
      <nav class="navigation navbar navbar-expand-lg navbar-dark bg-black">
        <div class="container">
          <!-- Brand -->
          <a href="#" class="logo">
            ClothingHub
          </a>

          <!-- Toggler Button -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Navbar Links -->
          <div class="collapse navbar-collapse " id="navbarNav">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a href="/" class="nav-link">Home</a>
              </li>
              <li class="nav-item">
                <a href="" class="nav-link">About</a>
              </li>
              <li class="nav-item">
                <a href="" class="nav-link">Category</a>
              </li>
              <li class="nav-item">
                <a href="" class="nav-link">Shop</a>
              </li>
              <li class="nav-item">
                <a href="" class="nav-link">Contact</a>
              </li>
            </ul>

            <!-- Icons Section -->
            <div class="d-flex">
              <a href="/customerProfile" class="icon nav-link">
                <i class="fa-solid fa-user"></i>
              </a>
              <a href="" class="icon nav-link">
                <i class="fa-solid fa-magnifying-glass"></i>
              </a>
              <a href="" class="icon nav-link">
                <i class="fa-regular fa-heart"></i>
              </a>
              <a href="" class="icon nav-link">
                <i class="fa-solid fa-cart-shopping"></i>
              </a>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <div class="content">
        <div class="container">
          <%if(content==='shopCheckout'){%>
            <div class="shop-checkout">
              <h2 class="page-title">shipping and checkout</h2>
              <div class="checkout-steps row mb-3">
                <div class="col-12 mb-4 col-md-4">
                  <a href="/checkoutPage?content=shopCheckout"
                    class="step-anchor active-anchor text-decoration-none d-flex gap-3">
                    <span class="item-number">01</span>
                    <span class="step-name">
                      <span>Shipping and Checkout</span>
                      <em>Checkout Your Items List</em>
                    </span>
                  </a>
                </div>
                <div class="col-12 mb-4 col-md-4">
                  <a href="/checkoutPage?content=verification" class="step-anchor text-decoration-none d-flex gap-3">
                    <span class="item-number">02</span>
                    <span class="step-name">
                      <span>Order Verification</span>
                      <em>Verify your order</em>
                    </span>
                  </a>
                </div>
                <div class="col-12 mb-4 col-md-4">
                  <a href="/checkoutPage?content=order" class="step-anchor text-decoration-none d-flex gap-3">
                    <span class="item-number">03</span>
                    <span class="step-name">
                      <span>Confirmation</span>
                      <em>Order confirmation</em>
                    </span>
                  </a>
                </div>
              </div>
              <form method="post" action="/orderDataSave">
                <div class="row">
                  <div class="left-section col-12 mb-4 col-xl-6 mb-xl-0">
                    <h3>billing form</h3>
                    <div class="row">
                      <div class="form-group col-6">
                        <input type="text" name="firstname" placeholder="First Name *" required>
                      </div>
                      <div class="form-group col-6">
                        <input type="text" name="lastname" id="lastname" placeholder="Last Name *" required>
                      </div>
                      <div class="form-group col-12">
                        <input type="number" name="phone" id="phone" placeholder="Phone *" required>
                      </div>
                      <div class="form-group col-12">
                        <input type="text" name="email" id="email" placeholder="Email *" required>
                      </div>
                      <div class="form-group">
                        <input type="text" name="street" id="street" placeholder="Street Name *" required>
                      </div>
                      <div class="form-group">
                        <input type="text" name="city" id="city" placeholder="Town / City *" required>
                      </div>
                      <div class="form-group">
                        <input type="number" name="pin" id="pincode" placeholder="Postcode / ZIP *" required>
                      </div>
                      <div class="form-group">
                        <input type="text" name="state" id="state" placeholder="State *" required>
                      </div>
                      <div class="form-group">
                        <input type="text" name="country" id="country" placeholder="Country *" required>
                      </div>
                      <div>
                        <textarea cols="30" name="note" rows="8" placeholder="Order Notes (Optional)"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="right-section col-12 col-xl-6 mt-xl-5">
                    <div class="checkout-totals mb-4">
                      <h3>your order</h3>
                      <table class="checkout-cart-items">
                        <thead>
                          <tr>
                            <th>PRODUCT</th>
                            <th>SUBTOTAL</th>
                          </tr>
                        </thead>
                        <%productData.map((product)=>{%>
                          <%})%>
                            <tbody>
                              <%productData.map((product)=>{%>
                                <tr>
                                  <td>
                                    <%=product.productName%> <span class="qty-span">x<%=product.quantity%></span>
                                  </td>
                                  <td class="product-Price">
                                    <%=product.price * product.quantity%>
                                  </td>
                                  <td>
                                    <input type="text" name="shopName" value="<%=product.shopName%>" hidden>
                                  </td>
                                  <td>
                                    <input type="text" name="productName" value="<%=product.productName%>" hidden>
                                  </td>
                                  <td>
                                    <input type="number" name="quantity" value="<%=product.quantity%>" hidden>
                                  </td>
                                  <td>
                                    <input type="text" name="productImg" value="<%=product.productImage%>" hidden>
                                  </td>
                                </tr>
                                <%})%>
                            </tbody>
                      </table>
                      <table class="checkout-item-total">
                        <tbody>
                          <tr>
                            <th>SUBTOTAL</th>
                            <td id="subtotal-price"></td>
                          </tr>
                          <tr>
                            <th>SHIPPING Tax (2%)</th>
                            <td id="shipping-tax"></td>
                          </tr>
                          <tr>
                            <th>GST (18%)</th>
                            <td id="gst-tax"></td>
                          </tr>
                          <tr>
                            <th>TOTAL AMOUNT</th>
                            <td id="totalAmount"></td>
                            <input type="text" value="" name="totalAmount" class="totalAmount" hidden>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="checkout-payment">
                      <div class="form-group mb-4">
                        <label class="mb-4">Choose Payment Method</label>
                        <div class="payment-options">
                          <div class="d-flex align-items-center mb-3">
                            <label class="w-50 mb-0">Credit/Debit Card</label>
                            <input type="radio" name="paymentMethod" value="Card Payment" checked class="w-25">
                          </div>
                          <div class="d-flex align-items-center mb-3">
                            <label class="w-50 mb-0">Net Banking</label>
                            <input type="radio" name="paymentMethod" value="Netbanking" class="w-25">
                          </div>
                          <div class="d-flex align-items-center mb-3">
                            <label class="w-50 mb-0">UPI</label>
                            <input type="radio" name="paymentMethod" value="UPI Payment" class="w-25">
                          </div>
                        </div>
                      </div>

                      <div id="cardDetails" class="payment-details">
                        <div class="form-group">
                          <label for="cardNumber">Card Number</label>
                          <input type="text" id="cardNumber" name="cardNumber" maxlength="19"
                            placeholder="1234 5678 9012 3456">
                        </div>
                        <div class="form-row">
                          <div class="form-group">
                            <label for="expiryDate">Expiry Date</label>
                            <input type="month" name="expiryDate" id="expiryDate">
                          </div>
                          <div class="form-group">
                            <label for="cvv">CVV</label>
                            <input type="password" id="cvv" name="cvv" maxlength="3" placeholder="123">
                          </div>
                        </div>
                      </div>

                      <div id="netBankingDetails" class="payment-details">
                        <div class="form-group">
                          <label for="bankSelect">Select Bank</label>
                          <select id="bankSelect" name="bankSelect">
                            <option value="hdfc">HDFC Bank</option>
                            <option value="sbi">State Bank of India</option>
                            <option value="icici">ICICI Bank</option>
                          </select>
                        </div>
                      </div>

                      <div id="upiDetails" class="payment-details">
                        <div class="form-group">
                          <label for="upiId">UPI ID</label>
                          <input type="text" id="upiId" name="upiId" placeholder="example@upi">
                        </div>
                      </div>
                    </div>
                    <button type="submit" class="submitBtn">Place order</button>
                  </div>
                </div>
              </form>
            </div>
            <%}else if(content==='verification'){%>
              <div class="verification">
                <h2 class="page-title">Order verification</h2>
                <div class="checkout-steps row mb-3">
                  <div class="col-12 mb-4 col-md-4">
                    <a href="/checkoutPage?content=shopCheckout" class="step-anchor text-decoration-none d-flex gap-3">
                      <span class="item-number">01</span>
                      <span class="step-name">
                        <span>Shipping and Checkout</span>
                        <em>Checkout Your Items List</em>
                      </span>
                    </a>
                  </div>
                  <div class="col-12 mb-4 col-md-4">
                    <a href="/checkoutPage?content=verification"
                      class="step-anchor active-anchor  text-decoration-none d-flex gap-3">
                      <span class="item-number">02</span>
                      <span class="step-name">
                        <span>Order Verification</span>
                        <em>Verify your order</em>
                      </span>
                    </a>
                  </div>
                  <div class="col-12 mb-4 col-md-4">
                    <a href="/checkoutPage?content=order" class="step-anchor text-decoration-none d-flex gap-3">
                      <span class="item-number">03</span>
                      <span class="step-name">
                        <span>Confirmation</span>
                        <em>Order confirmation</em>
                      </span>
                    </a>
                  </div>
                </div>
                <div class="otp-verification">
                  <h2>Verify Your Order</h2>
                  <p>We have sent a one-time password (OTP) to your registered mobile number. Please enter it below to
                    confirm your order.</p>
                  <form class="otp-form" method="post" action="/verifyOTP">
                    <label for="otp-input">Enter OTP:</label>
                    <input type="number" id="otp-input" maxlength="6" name="enterOtp" placeholder="Enter 6-digit OTP" />
                    <input type="hidden" id="otp-input" maxlength="6" value=<%=otp ? otp : ''%> name="generatedOtp" hidden/>
                    <input type="hidden" id="otp-input" maxlength="6" value=<%=orderNumber ? orderNumber : ''%> name="orderNumber"/>
                    <button type="submit">Verify</button>
                  </form>
                  <p class="resend">Didnâ€™t receive the OTP? <a href="#">Resend OTP</a></p>
                </div>

              </div>
              <%}else{%>
                <div class="order-div">
                  <h2 class="page-title">order received</h2>
                  <div class="checkout-steps row mb-3">
                    <div class="col-12 mb-4 col-md-4">
                      <a href="/checkoutPage?content=shopCheckout"
                        class="step-anchor text-decoration-none d-flex gap-3">
                        <span class="item-number">01</span>
                        <span class="step-name">
                          <span>Shipping and Checkout</span>
                          <em>Checkout Your Items List</em>
                        </span>
                      </a>
                    </div>
                    <div class="col-12 mb-4 col-md-4">
                      <a href="/checkoutPage?content=verification"
                        class="step-anchor text-decoration-none d-flex gap-3">
                        <span class="item-number">02</span>
                        <span class="step-name">
                          <span>Order Verification</span>
                          <em>Verify your order</em>
                        </span>
                      </a>
                    </div>
                    <div class="col-12 mb-4 col-md-4">
                      <a href="/checkoutPage?content=order"
                        class="step-anchor active-anchor text-decoration-none d-flex gap-3">
                        <span class="item-number">03</span>
                        <span class="step-name">
                          <span>Confirmation</span>
                          <em>Order confirmation</em>
                        </span>
                      </a>
                    </div>
                  </div>
                  <%if(orderData){%>
                    <div class="order-complete">
                      <div class="text-center">
                        <div class="check-icon">
                          <i class="fas fa-check"></i>
                        </div>
                        <h2 class="order-h2">Your order is placed!</h2>
                        <p class="order-para">Thank you. Your order has been received.</p>
                      </div>
                      <div class="order-info">
                        <div class="row">
                          <div class="col-12 text-center mb-3 col-md-3 mb-md-0">
                            <div class="order-info-item">
                              <label>Order Number</label>
                              <span>
                                <%=orderData.orderNumber%>
                              </span>
                            </div>
                          </div>
                          <div class="col-12 text-center mb-3 col-md-3 mb-md-0">
                            <div class="order-info-item">
                              <label>Date</label>
                              <span>
                                <%=orderData.date%>
                              </span>
                            </div>
                          </div>
                          <div class="col-12 text-center mb-3 col-md-3 mb-md-0">
                            <div class="order-info-item">
                              <label>Total</label>
                              <span>
                                <%=orderData.totalAmount%>
                              </span>
                            </div>
                          </div>
                          <div class="col-12 text-center mb-3 col-md-3 mb-md-0">
                            <div class="order-info-item">
                              <label>Payment Method</label>
                              <span>
                                <%=orderData.paymentMethod%>
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <%}else{%>
                      <div class="no-order">
                        <p>You have no orders at the moment.</p>
                      </div>
                      <%}%>
                </div>
                <%}%>
        </div>
      </div>
    </main>
    <footer>
      <div class="footer-container">
        <div class="container">
          <div class="row">
            <div class="col-12 mb-4 col-sm-6 mb-sm-5 col-xl-3 mb-xl-0">
              <div class="content_1">
                <a href="" class="navbar-brand">
                  <span class="logo">ClothingHub</span>
                </a>
                <p>The customer is at the heart of our<br>unique business model, which includes<br>design.</p>
                <img src="/images/illustration/cards.png" alt="cards">
              </div>
            </div>
            <div class="col-12 mb-4 col-sm-6 mb-sm-5 col-xl-3 mb-xl-0">
              <div class="content_2">
                <h4>SHOPPING</h4>
                <a href="#sellers">Clothing Store</a>
                <a href="#sellers">Trending Shoes</a>
                <a href="#sellers">Accessories</a>
                <a href="#sellers">Sale</a>
              </div>
            </div>
            <div class="col-12 mb-4 col-sm-6 mb-sm-5 col-xl-3 mb-xl-0">
              <div class="content_3">
                <h4>SHOPPING</h4>
                <a href="./contact.html">Contact Us</a>
                <a href="https://payment-method-sb.netlify.app/" target="_blank">Payment Method</a>
                <a href="https://delivery-status-sb.netlify.app/" target="_blank">Delivery</a>
                <a href="https://codepen.io/sandeshbodake/full/Jexxrv" target="_blank">Return and Exchange</a>
              </div>
            </div>
            <div class="col-12 col-sm-6 mb-sm-5 col-xl-3">
              <div class="content_4">
                <h4>NEWLETTER</h4>
                <p>Be the first to know about new<br>arrivals, look books, sales & promos!</p>
                <div class="f-mail">
                  <input type="email" placeholder="Your Email">
                  <i class="fa-solid fa-envelope"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="f-design">
        <div class="f-design-txt container">
          <p class="mb-0">Design and Code by @Manoj Patil</p>
        </div>
      </div>
    </footer>
  </div>



  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const paymentMethods = document.getElementsByName('paymentMethod');
      const cardDetails = document.getElementById('cardDetails');
      const netBankingDetails = document.getElementById('netBankingDetails');
      const upiDetails = document.getElementById('upiDetails');

      // Function to toggle payment method details
      const togglePaymentDetails = () => {
        cardDetails.style.display = paymentMethods[0].checked ? 'block' : 'none';
        netBankingDetails.style.display = paymentMethods[1].checked ? 'block' : 'none';
        upiDetails.style.display = paymentMethods[2].checked ? 'block' : 'none';
      };

      // Add event listeners to payment method radios
      paymentMethods.forEach(method => method.addEventListener('change', togglePaymentDetails));

      // Initialize with default selection
      togglePaymentDetails();

    });



    $(document).ready(function () {
      // Initialize variables
      let subtotal = 0;

      // Calculate subtotal by iterating over product rows
      $('.checkout-cart-items tbody tr').each(function () {
        const productPrice = parseFloat($(this).find('.product-Price').text().trim());
        subtotal += productPrice; // Accumulate product prices
      });

      // Calculate taxes
      const shippingTax = subtotal * 0.02; // 2% shipping tax
      const gstTax = subtotal * 0.18; // 18% GST tax

      // Calculate total amount
      const totalAmount = subtotal + shippingTax + gstTax;

      // Update the DOM
      $('#subtotal-price').text(subtotal.toFixed(2)); // Show subtotal
      $('#shipping-tax').text(shippingTax.toFixed(2)); // Show shipping tax
      $('#gst-tax').text(gstTax.toFixed(2)); // Show GST
      $('#totalAmount').text(totalAmount.toFixed(2)); // Show total amount
      $('.totalAmount').val(totalAmount.toFixed(2)); // Show total amount
    });



  </script>
</body>

</html>